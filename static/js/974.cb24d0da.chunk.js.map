{"version":3,"file":"static/js/974.cb24d0da.chunk.js","mappings":"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","sources":["hooks/useChat.js","pages/MessagesPage.js","utils/sanitize.js"],"sourcesContent":["import { useState, useCallback, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useNetworking } from '../contexts/NetworkingContext';\nimport { useNotification } from '../contexts/NotificationContext';\nimport { sanitizeChatMessage } from '../utils/sanitize';\n\nexport const useChat = () => {\n  const { user } = useAuth();\n  const { connections, sendMessage } = useNetworking();\n  const { showError } = useNotification();\n  const [messages, setMessages] = useState({});\n  const [isTyping, setIsTyping] = useState({});\n  const [typingTimeout, setTypingTimeout] = useState({});\n\n  // Simulate receiving messages\n  useEffect(() => {\n    // Simulated WebSocket connection setup\n    console.log('Setting up chat connection...');\n    return () => {\n      // Cleanup WebSocket connection\n      console.log('Cleaning up chat connection...');\n    };\n  }, []);\n\n  // Handle incoming messages\n  const handleIncomingMessage = useCallback((chatId, message) => {\n    setMessages(prev => ({\n      ...prev,\n      [chatId]: [...(prev[chatId] || []), {\n        id: Date.now(),\n        senderId: message.senderId,\n        message: message.content,\n        timestamp: new Date(),\n        sequence: (prev[chatId]?.length || 0) + 1,\n        sent: false\n      }]\n    }));\n  }, []);\n\n  // Send message with optimistic update\n  const sendChatMessage = useCallback(async (chatId, content) => {\n    const sanitizedMessage = sanitizeChatMessage(content);\n    \n    if (!sanitizedMessage) {\n      showError('Message contains invalid content');\n      return false;\n    }\n\n    const tempId = Date.now();\n    const newMessage = {\n      id: tempId,\n      senderId: user?.id,\n      message: sanitizedMessage,\n      timestamp: new Date(),\n      sequence: (messages[chatId]?.length || 0) + 1,\n      sent: true,\n      pending: true\n    };\n\n    // Optimistic update\n    setMessages(prev => ({\n      ...prev,\n      [chatId]: [...(prev[chatId] || []), newMessage]\n    }));\n\n    try {\n      await sendMessage(chatId, sanitizedMessage);\n      \n      // Confirm message sent\n      setMessages(prev => ({\n        ...prev,\n        [chatId]: prev[chatId].map(msg => \n          msg.id === tempId ? { ...msg, pending: false } : msg\n        )\n      }));\n\n      return true;\n    } catch (error) {\n      // Mark message as failed\n      setMessages(prev => ({\n        ...prev,\n        [chatId]: prev[chatId].map(msg =>\n          msg.id === tempId ? { ...msg, failed: true } : msg\n        )\n      }));\n      \n      showError('Failed to send message. Please try again.');\n      return false;\n    }\n  }, [user?.id, messages, sendMessage, showError]);\n\n  // Handle typing indicators\n  const handleTypingStart = useCallback((chatId) => {\n    if (typingTimeout[chatId]) {\n      clearTimeout(typingTimeout[chatId]);\n    }\n\n    setIsTyping(prev => ({ ...prev, [chatId]: true }));\n    \n    const timeout = setTimeout(() => {\n      setIsTyping(prev => ({ ...prev, [chatId]: false }));\n    }, 3000);\n    \n    setTypingTimeout(prev => ({ ...prev, [chatId]: timeout }));\n  }, [typingTimeout]);\n\n  // Load chat history\n  const loadChatHistory = useCallback(async (chatId) => {\n    try {\n      // Simulate API call to load chat history\n      console.log(`Loading chat history for ${chatId}...`);\n      // In a real app, you would fetch messages from your backend here\n    } catch (error) {\n      showError('Failed to load chat history');\n    }\n  }, [showError]);\n\n  // Retry failed message\n  const retryMessage = useCallback(async (chatId, messageId) => {\n    const failedMessage = messages[chatId]?.find(msg => msg.id === messageId);\n    if (!failedMessage) return;\n\n    // Remove failed message and try sending again\n    setMessages(prev => ({\n      ...prev,\n      [chatId]: prev[chatId].filter(msg => msg.id !== messageId)\n    }));\n\n    return sendChatMessage(chatId, failedMessage.message);\n  }, [messages, sendChatMessage]);\n\n  // Mark messages as read\n  const markAsRead = useCallback((chatId) => {\n    // In a real app, you would send this to your backend\n    console.log(`Marking messages as read for chat ${chatId}`);\n  }, []);\n\n  return {\n    messages,\n    isTyping,\n    sendChatMessage,\n    handleTypingStart,\n    loadChatHistory,\n    retryMessage,\n    markAsRead,\n    handleIncomingMessage\n  };\n};","import React, { useState, useRef, useEffect, useMemo, useCallback } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport Header from '../components/Header';\nimport MessageBubble from '../components/MessageBubble';\nimport ChatList from '../components/ChatList';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useNetworking } from '../contexts/NetworkingContext';\nimport { useChat } from '../hooks/useChat';\nimport { sanitizeChatMessage } from '../utils/sanitize';\n\nconst MessagesPage = () => {\n  const [searchParams] = useSearchParams();\n  const { user } = useAuth();\n  const { connections } = useNetworking();\n  const [activeChat, setActiveChat] = useState(null);\n  const [newMessage, setNewMessage] = useState('');\n  const [activeTab, setActiveTab] = useState('direct');\n  const messagesEndRef = useRef(null);\n  const chatInputRef = useRef(null);\n  const [isSearching, setIsSearching] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  \n  // Handle pre-selected user from URL parameter\n  useEffect(() => {\n    const userId = searchParams.get('userId');\n    if (userId) {\n      const userIdNum = parseInt(userId);\n      const connection = connections.find(c => c.id === userIdNum);\n      if (connection) {\n        setActiveChat(connection);\n        setActiveTab('direct');\n      }\n    }\n  }, [searchParams, connections]);\n\n  const {\n    messages,\n    isTyping,\n    sendChatMessage,\n    handleTypingStart,\n    loadChatHistory,\n    retryMessage,\n    markAsRead\n  } = useChat();\n\n  // Mock group forums\n  const [groupForums] = useState([\n    {\n      id: 'ai-workshop',\n      name: 'AI Workshop Discussion',\n      description: 'Discuss AI development techniques and share resources',\n      members: 45,\n      lastMessage: 'Great session today! Anyone has the slides?',\n      lastMessageTime: new Date(Date.now() - 300000),\n      unread: 3,\n      avatar: 'AI'\n    },\n    {\n      id: 'career-fair',\n      name: 'Career Fair 2025',\n      description: 'Tips, experiences, and networking for the upcoming career fair',\n      members: 120,\n      lastMessage: 'Microsoft booth was amazing!',\n      lastMessageTime: new Date(Date.now() - 600000),\n      unread: 0,\n      avatar: 'CF'\n    },\n    {\n      id: 'hackathon-team',\n      name: 'Innovation Challenge Team',\n      description: 'Coordination for the 48-hour hackathon',\n      members: 8,\n      lastMessage: 'Meeting at 2 PM in lab 3',\n      lastMessageTime: new Date(Date.now() - 900000),\n      unread: 1,\n      avatar: 'HC'\n    }\n  ]);\n\n  const [chatMessages, setChatMessages] = useState({\n    1: [\n      { id: 1, senderId: 1, message: 'Hey! Great presentation today!', timestamp: new Date(Date.now() - 300000), sent: false },\n      { id: 2, senderId: user?.id, message: 'Thank you! I really enjoyed your questions during the Q&A', timestamp: new Date(Date.now() - 240000), sent: true },\n      { id: 3, senderId: 1, message: 'Would love to collaborate on a project sometime', timestamp: new Date(Date.now() - 180000), sent: false }\n    ],\n    2: [\n      { id: 4, senderId: 2, message: 'Would love to collaborate on the AI project', timestamp: new Date(Date.now() - 600000), sent: false },\n      { id: 5, senderId: user?.id, message: 'Absolutely! When are you free to discuss?', timestamp: new Date(Date.now() - 540000), sent: true }\n    ]\n  });\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [chatMessages, activeChat]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const handleSendMessage = async (e) => {\n    e.preventDefault();\n    if (!newMessage.trim() || !activeChat) return;\n\n    const success = await sendChatMessage(activeChat, newMessage);\n    if (success) {\n      setNewMessage('');\n      chatInputRef.current?.focus();\n    }\n  };\n\n  const formatTime = (timestamp) => {\n    return new Date(timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  };\n\n  const formatDate = (timestamp) => {\n    const now = new Date();\n    const date = new Date(timestamp);\n    const diffTime = now - date;\n    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n\n    if (diffDays === 0) return 'Today';\n    if (diffDays === 1) return 'Yesterday';\n    if (diffDays < 7) return `${diffDays} days ago`;\n    return date.toLocaleDateString();\n  };\n\n  const ChatList = ({ items, type }) => (\n    <div className=\"space-y-2\" role=\"list\" aria-label={`${type === 'group' ? 'Group forums' : 'Direct messages'}`}>\n      {items.map((item) => (\n        <button\n          key={item.id}\n          type=\"button\"\n          className={`w-full p-4 rounded-lg cursor-pointer transition-colors text-left ${\n            activeChat === item.id\n              ? 'bg-custom-teal bg-opacity-20 border-l-4 border-custom-teal'\n              : 'bg-custom-bg-2 hover:bg-custom-bg border border-custom-border'\n          }`}\n          onClick={() => setActiveChat(item.id)}\n          aria-current={activeChat === item.id ? 'true' : undefined}\n          aria-label={`Chat with ${item.name}. Last message: ${item.lastMessage || item.description || 'No messages'}`}\n        >\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-12 h-12 rounded-full bg-gradient-to-r from-custom-blue to-custom-teal flex items-center justify-center text-white font-bold\">\n              {item.initials || item.avatar}\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"font-semibold text-custom-text truncate\">\n                  {item.name}\n                </h3>\n                <span className=\"text-xs text-custom-text-secondary\">\n                  {formatDate(item.lastMessageTime || item.lastSeen)}\n                </span>\n              </div>\n              <p className=\"text-sm text-custom-text-secondary truncate\">\n                {type === 'group' ? item.description : item.lastMessage || 'Start a conversation'}\n              </p>\n              {type === 'group' && (\n                <div className=\"flex items-center justify-between mt-1\">\n                  <span className=\"text-xs text-custom-text-secondary\">\n                    {item.members} members\n                  </span>\n                  {item.unread > 0 && (\n                    <span className=\"bg-red-500 text-white text-xs rounded-full px-2 py-1\">\n                      {item.unread}\n                    </span>\n                  )}\n                </div>\n              )}\n            </div>\n          </div>\n        </button>\n      ))}\n    </div>\n  );\n\n  const MessageBubble = ({ message, isOwn }) => (\n    <div \n      className={`flex ${isOwn ? 'justify-end' : 'justify-start'} mb-4`}\n      role=\"article\"\n      aria-label={`Message ${isOwn ? 'sent by you' : 'received'} at ${formatTime(message.timestamp)}`}\n    >\n      <div className={`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${isOwn ? 'bg-custom-teal text-black' : 'bg-custom-bg-2 text-custom-text border border-custom-border'}`}>\n        {/* Use textContent implicitly by rendering as text, not HTML */}\n        <p className=\"text-sm whitespace-pre-wrap break-words\">{message.message}</p>\n        <time \n          className={`text-xs mt-1 block ${isOwn ? 'text-black opacity-70' : 'text-custom-text-secondary'}`}\n          dateTime={new Date(message.timestamp).toISOString()}\n        >\n          {formatTime(message.timestamp)}\n        </time>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"bg-custom-bg text-custom-text min-h-screen\">\n      <Header />\n      \n      <main className=\"container mx-auto px-4 lg:px-8 py-8\" id=\"main-content\">\n        <div className=\"bg-custom-bg-2 rounded-lg border border-custom-border h-[calc(100vh-200px)] flex\">\n          {/* Sidebar */}\n          <aside className=\"w-1/3 border-r border-custom-border flex flex-col\" aria-label=\"Message list\">\n            {/* Header */}\n            <div className=\"p-4 border-b border-custom-border space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <h1 className=\"text-xl font-bold text-custom-text\">Messages</h1>\n                <button\n                  type=\"button\"\n                  className=\"p-2 text-custom-text-secondary hover:text-custom-text hover:bg-custom-bg rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-custom-teal focus:ring-offset-2\"\n                  aria-label=\"Start new conversation\"\n                >\n                  <span className=\"material-icons\">edit</span>\n                </button>\n              </div>\n\n              {/* Search */}\n              <div className=\"relative\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Search messages...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 bg-custom-bg border border-custom-border rounded-lg text-custom-text placeholder-custom-text-secondary focus:outline-none focus:ring-2 focus:ring-custom-teal\"\n                  onFocus={() => setIsSearching(true)}\n                  onBlur={() => setTimeout(() => setIsSearching(false), 200)}\n                />\n                <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-custom-text-secondary\">\n                  <span className=\"material-icons text-sm\">search</span>\n                </span>\n                {searchQuery && (\n                  <button\n                    type=\"button\"\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-custom-text-secondary hover:text-custom-text\"\n                    onClick={() => setSearchQuery('')}\n                    aria-label=\"Clear search\"\n                  >\n                    <span className=\"material-icons text-sm\">close</span>\n                  </button>\n                )}\n              </div>\n              \n              {/* Tabs */}\n              <div className=\"flex space-x-1 bg-custom-bg p-1 rounded-lg\" role=\"tablist\" aria-label=\"Message categories\">\n                <button\n                  type=\"button\"\n                  role=\"tab\"\n                  aria-selected={activeTab === 'direct'}\n                  aria-controls=\"chat-list-panel\"\n                  className={`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-custom-teal ${\n                    activeTab === 'direct'\n                      ? 'bg-custom-teal text-black'\n                      : 'text-custom-text-secondary hover:text-custom-text'\n                  }`}\n                  onClick={() => setActiveTab('direct')}\n                >\n                  Direct Messages\n                </button>\n                <button\n                  type=\"button\"\n                  role=\"tab\"\n                  aria-selected={activeTab === 'groups'}\n                  aria-controls=\"chat-list-panel\"\n                  className={`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-custom-teal ${\n                    activeTab === 'groups'\n                      ? 'bg-custom-teal text-black'\n                      : 'text-custom-text-secondary hover:text-custom-text'\n                  }`}\n                  onClick={() => setActiveTab('groups')}\n                >\n                  Group Forums\n                </button>\n              </div>\n            </div>\n\n            {/* Chat List */}\n            <div \n              id=\"chat-list-panel\"\n              role=\"tabpanel\"\n              className=\"flex-1 overflow-y-auto p-4\"\n              aria-label={`${activeTab === 'direct' ? 'Direct messages' : 'Group forums'} list`}\n            >\n              {activeTab === 'direct' ? (\n                <ChatList items={connections} type=\"direct\" />\n              ) : (\n                <ChatList items={groupForums} type=\"group\" />\n              )}\n            </div>\n          </aside>\n\n          {/* Chat Area */}\n          <section className=\"flex-1 flex flex-col\" aria-label=\"Chat conversation\">\n            {activeChat ? (\n              <>\n                {/* Chat Header */}\n                <header className=\"p-4 border-b border-custom-border bg-custom-bg-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-3\">\n                      <div className=\"relative\">\n                        <div \n                          className=\"w-10 h-10 rounded-full bg-gradient-to-r from-custom-blue to-custom-teal flex items-center justify-center text-white font-bold ring-2 ring-custom-teal ring-offset-2 ring-offset-custom-bg-2\"\n                          role=\"img\"\n                          aria-label={`${activeTab === 'direct' \n                            ? connections.find(c => c.id === activeChat)?.name\n                            : groupForums.find(g => g.id === activeChat)?.name} avatar`}\n                        >\n                          {activeTab === 'direct' \n                            ? connections.find(c => c.id === activeChat)?.initials\n                            : groupForums.find(g => g.id === activeChat)?.avatar\n                          }\n                        </div>\n                        {activeTab === 'direct' && (\n                          <span \n                            className=\"absolute bottom-0 right-0 h-3 w-3 bg-green-500 border-2 border-white rounded-full\"\n                            aria-label=\"Online\"\n                          ></span>\n                        )}\n                      </div>\n                      <div>\n                        <h2 className=\"font-semibold text-custom-text flex items-center space-x-2\">\n                          <span>\n                            {activeTab === 'direct' \n                              ? connections.find(c => c.id === activeChat)?.name\n                              : groupForums.find(g => g.id === activeChat)?.name\n                            }\n                          </span>\n                          {activeTab === 'group' && (\n                            <span className=\"bg-custom-teal text-black text-xs px-2 py-1 rounded-full\">\n                              Group\n                            </span>\n                          )}\n                        </h2>\n                        <p className=\"text-sm text-custom-text-secondary flex items-center space-x-2\">\n                          {activeTab === 'direct' ? (\n                            <>\n                              <span className=\"flex items-center\">\n                                <span className=\"h-2 w-2 bg-green-500 rounded-full mr-2\"></span>\n                                <span aria-label=\"User is online\">Online</span>\n                              </span>\n                              <span>•</span>\n                              <span>Last active 2m ago</span>\n                            </>\n                          ) : (\n                            <>\n                              <span className=\"flex items-center\">\n                                <span className=\"material-icons text-sm mr-1\">group</span>\n                                <span>{groupForums.find(g => g.id === activeChat)?.members} members</span>\n                              </span>\n                              <span>•</span>\n                              <span>3 online</span>\n                            </>\n                          )}\n                        </p>\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-2\">\n                      <button\n                        type=\"button\"\n                        className=\"p-2 text-custom-text-secondary hover:text-custom-text hover:bg-custom-bg rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-custom-teal focus:ring-offset-2\"\n                        aria-label=\"Start video call\"\n                      >\n                        <span className=\"material-icons\">videocam</span>\n                      </button>\n                      <button\n                        type=\"button\"\n                        className=\"p-2 text-custom-text-secondary hover:text-custom-text hover:bg-custom-bg rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-custom-teal focus:ring-offset-2\"\n                        aria-label=\"Start voice call\"\n                      >\n                        <span className=\"material-icons\">call</span>\n                      </button>\n                      <button\n                        type=\"button\"\n                        className=\"p-2 text-custom-text-secondary hover:text-custom-text hover:bg-custom-bg rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-custom-teal focus:ring-offset-2\"\n                        aria-label=\"View chat information\"\n                      >\n                        <span className=\"material-icons\">info</span>\n                      </button>\n                    </div>\n                  </div>\n                </header>\n\n                {/* Messages */}\n                <div \n                  className=\"flex-1 overflow-y-auto p-4\"\n                  role=\"log\"\n                  aria-live=\"polite\"\n                  aria-atomic=\"false\"\n                  aria-label=\"Chat messages\"\n                >\n                  {chatMessages[activeChat]?.sort((a, b) => (a.sequence || 0) - (b.sequence || 0)).map((message) => (\n                    <MessageBubble\n                      key={message.id}\n                      message={message}\n                      isOwn={message.senderId === user?.id}\n                    />\n                  ))}\n                  <div ref={messagesEndRef} aria-hidden=\"true\" />\n                </div>\n\n                {/* Message Input */}\n                <footer className=\"p-4 border-t border-custom-border\">\n                  <form onSubmit={handleSendMessage} className=\"space-y-4\" aria-label=\"Send message\">\n                    <div className=\"flex space-x-3\">\n                      <div className=\"flex-1 relative\">\n                        <label htmlFor=\"message-input\" className=\"sr-only\">\n                          Type your message\n                        </label>\n                        <textarea\n                          id=\"message-input\"\n                          ref={chatInputRef}\n                          value={newMessage}\n                          onChange={(e) => {\n                            setNewMessage(e.target.value);\n                            handleTypingStart(activeChat);\n                          }}\n                          onKeyDown={(e) => {\n                            if (e.key === 'Enter' && !e.shiftKey) {\n                              e.preventDefault();\n                              handleSendMessage(e);\n                            }\n                          }}\n                          placeholder=\"Type a message... (Press Enter to send, Shift+Enter for new line)\"\n                          maxLength=\"1000\"\n                          rows={1}\n                          className=\"w-full px-4 py-3 bg-custom-bg border border-custom-border rounded-lg text-custom-text focus:outline-none focus:ring-2 focus:ring-custom-teal resize-none\"\n                          style={{ minHeight: '2.5rem', maxHeight: '8rem' }}\n                          aria-describedby=\"message-limit\"\n                          autoComplete=\"off\"\n                        />\n                        <div className=\"absolute bottom-2 right-2 flex items-center space-x-2 text-custom-text-secondary text-xs\">\n                          <span>{newMessage.length}/1000</span>\n                        </div>\n                      </div>\n                      <div className=\"flex items-end space-x-2\">\n                        <button\n                          type=\"button\"\n                          className=\"p-2 text-custom-text-secondary hover:text-custom-text focus:outline-none focus:ring-2 focus:ring-custom-teal focus:ring-offset-2 rounded-lg\"\n                          aria-label=\"Attach file\"\n                        >\n                          <span className=\"material-icons\">attach_file</span>\n                        </button>\n                        <button\n                          type=\"button\"\n                          className=\"p-2 text-custom-text-secondary hover:text-custom-text focus:outline-none focus:ring-2 focus:ring-custom-teal focus:ring-offset-2 rounded-lg\"\n                          aria-label=\"Add emoji\"\n                        >\n                          <span className=\"material-icons\">mood</span>\n                        </button>\n                        <button\n                          type=\"submit\"\n                          disabled={!newMessage.trim()}\n                          className=\"bg-custom-teal text-black px-6 py-2 rounded-lg hover:bg-opacity-80 transition-all duration-300 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-custom-teal focus:ring-offset-2 transform hover:scale-105\"\n                          aria-label=\"Send message\"\n                        >\n                          <span className=\"material-icons text-sm\" aria-hidden=\"true\">send</span>\n                          <span>Send</span>\n                        </button>\n                      </div>\n                    </div>\n                  </form>\n                  {isTyping[activeChat] && (\n                    <div className=\"text-xs text-custom-text-secondary mt-1 flex items-center\">\n                      <span className=\"material-icons text-sm mr-1\">edit</span>\n                      Someone is typing...\n                    </div>\n                  )}\n                </footer>\n              </>\n            ) : (\n              /* No Chat Selected */\n              <div className=\"flex-1 flex items-center justify-center\" role=\"status\" aria-live=\"polite\">\n                <div className=\"text-center\">\n                  <span className=\"material-icons text-6xl text-custom-text-secondary mb-4 block\" aria-hidden=\"true\">\n                    chat_bubble_outline\n                  </span>\n                  <h3 className=\"text-xl font-semibold text-custom-text mb-2\">\n                    Select a conversation\n                  </h3>\n                  <p className=\"text-custom-text-secondary\">\n                    Choose from your existing conversations or start a new one\n                  </p>\n                </div>\n              </div>\n            )}\n          </section>\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default MessagesPage;\n","import DOMPurify from 'dompurify';\n\n/**\n * Sanitizes HTML content to prevent XSS attacks\n * @param {string} dirty - Potentially unsafe HTML string\n * @param {object} config - DOMPurify configuration options\n * @returns {string} - Sanitized HTML string\n */\nexport const sanitizeHTML = (dirty, config = {}) => {\n  return DOMPurify.sanitize(dirty, {\n    ALLOWED_TAGS: ['b', 'i', 'em', 'strong', 'a', 'p', 'br'],\n    ALLOWED_ATTR: ['href', 'title'],\n    ...config\n  });\n};\n\n/**\n * Sanitizes user input text (strips all HTML)\n * @param {string} input - User input string\n * @returns {string} - Plain text string\n */\nexport const sanitizeText = (input) => {\n  if (!input) return '';\n  return DOMPurify.sanitize(input, { ALLOWED_TAGS: [] });\n};\n\n/**\n * Escapes special characters in a string for safe display\n * @param {string} str - Input string\n * @returns {string} - Escaped string\n */\nexport const escapeHTML = (str) => {\n  if (!str) return '';\n  const div = document.createElement('div');\n  div.textContent = str;\n  return div.innerHTML;\n};\n\n/**\n * Sanitizes chat message content\n * @param {string} message - Chat message\n * @returns {string} - Sanitized message\n */\nexport const sanitizeChatMessage = (message) => {\n  return sanitizeText(message).trim();\n};\n\n/**\n * Validates and sanitizes URL\n * @param {string} url - URL to validate\n * @returns {string|null} - Sanitized URL or null if invalid\n */\nexport const sanitizeURL = (url) => {\n  try {\n    const urlObj = new URL(url);\n    // Only allow http and https protocols\n    if (!['http:', 'https:'].includes(urlObj.protocol)) {\n      return null;\n    }\n    return urlObj.href;\n  } catch {\n    return null;\n  }\n};\n\nexport default {\n  sanitizeHTML,\n  sanitizeText,\n  escapeHTML,\n  sanitizeChatMessage,\n  sanitizeURL\n};\n"],"names":["MessagesPage","_connections$find","_groupForums$find","_connections$find2","_groupForums$find2","_connections$find3","_groupForums$find3","_groupForums$find4","_chatMessages$activeC","searchParams","useSearchParams","user","useAuth","connections","useNetworking","activeChat","setActiveChat","useState","newMessage","setNewMessage","activeTab","setActiveTab","messagesEndRef","useRef","chatInputRef","isSearching","setIsSearching","searchQuery","setSearchQuery","useEffect","userId","get","userIdNum","parseInt","connection","find","c","id","messages","isTyping","sendChatMessage","handleTypingStart","loadChatHistory","retryMessage","markAsRead","useChat","sendMessage","showError","useNotification","setMessages","setIsTyping","typingTimeout","setTypingTimeout","console","log","handleIncomingMessage","useCallback","chatId","message","prev","_prev$chatId","_objectSpread","Date","now","senderId","content","timestamp","sequence","length","sent","async","_messages$chatId","sanitizedMessage","sanitizeChatMessage","tempId","pending","map","msg","error","failed","clearTimeout","timeout","setTimeout","concat","messageId","_messages$chatId2","failedMessage","filter","groupForums","name","description","members","lastMessage","lastMessageTime","unread","avatar","chatMessages","setChatMessages","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSendMessage","e","preventDefault","trim","_chatInputRef$current","focus","formatTime","toLocaleTimeString","hour","minute","formatDate","date","diffTime","diffDays","Math","floor","toLocaleDateString","ChatList","_ref","items","type","_jsx","className","role","children","item","onClick","undefined","_jsxs","initials","lastSeen","MessageBubble","_ref2","isOwn","dateTime","toISOString","Header","placeholder","value","onChange","target","onFocus","onBlur","_Fragment","g","sort","a","b","ref","onSubmit","htmlFor","onKeyDown","key","shiftKey","maxLength","rows","style","minHeight","maxHeight","autoComplete","disabled","sanitizeText","input","DOMPurify","sanitize","ALLOWED_TAGS"],"sourceRoot":""}