"use strict";(self.webpackChunkcampus_connect_react=self.webpackChunkcampus_connect_react||[]).push([[93],{3415:(e,t,s)=>{s.d(t,{Pu:()=>o,jZ:()=>a});s(9379);var r=s(7977);const a=e=>e?r.A.sanitize(e,{ALLOWED_TAGS:[]}):"",o=e=>a(e).trim()},8592:(e,t,s)=>{s.d(t,{A:()=>n});var r=s(5043),a=s(3005),o=s(579);const n=e=>{let{showLabel:t=!1}=e;const{isDark:s,toggleTheme:n}=(0,a.D)(),l=(0,r.useCallback)(()=>{n()},[n]),i=(0,r.useCallback)(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),l())},[l]),c=s?"Switch to Light Mode":"Switch to Dark Mode";return(0,o.jsxs)("div",{className:"flex items-center",children:[t&&(0,o.jsx)("span",{className:"mr-2 text-sm text-custom-text",children:c}),(0,o.jsxs)("div",{className:"relative inline-block",children:[(0,o.jsx)("input",{type:"checkbox",id:"theme-toggle",className:"sr-only",checked:s,onChange:l,onKeyDown:i,"aria-label":c}),(0,o.jsx)("label",{htmlFor:"theme-toggle",className:"theme-toggle ".concat(s?"checked":""),role:"switch","aria-checked":s,children:(0,o.jsx)("div",{className:"theme-toggle-knob"})})]})]})}},9093:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var r=s(9379),a=s(5043),o=s(3216),n=s(5475),l=s(5016),i=s(6471),c=s(8592),d=s(9144),m=s(9335),u=s(3415),h=s(579);const p=()=>{const e=(0,o.Zp)(),{login:t,loading:s,isAuthenticated:p}=(0,l.A)(),{showSuccess:b,showError:x}=(0,i.h)(),[g,f]=(0,a.useState)({email:"",phone:"",enrollment:"",password:""}),[w,v]=(0,a.useState)({}),[j,N]=(0,a.useState)(""),[y,k]=(0,a.useState)(0);(0,a.useEffect)(()=>{p&&e("/")},[p,e]);const C=e=>{const{name:t,value:s}=e.target,a="password"===t?s:(0,u.jZ)(s);f((0,r.A)((0,r.A)({},g),{},{[t]:a})),w[t]&&v((0,r.A)((0,r.A)({},w),{},{[t]:""})),j&&N("")};return(0,h.jsxs)("div",{className:"bg-custom-bg text-custom-text min-h-screen flex items-center justify-center transition-theme",children:[(0,h.jsx)("a",{href:"#main-content",className:"skip-to-content",children:"Skip to main content"}),(0,h.jsxs)("main",{id:"main-content",className:"bg-custom-bg-2 p-8 rounded-lg shadow-md w-full max-w-md transition-theme",children:[(0,h.jsx)("h1",{className:"text-2xl font-bold text-center mb-6",children:"Sign In to Campus Connect"}),(0,h.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,h.jsx)("div",{className:"flex gap-3 items-center",children:(0,h.jsx)(c.A,{showLabel:!0})})}),j&&(0,h.jsxs)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",role:"alert","aria-live":"polite",children:[(0,h.jsx)("strong",{className:"font-bold",children:"Error: "}),(0,h.jsx)("span",{children:j})]}),(0,h.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),N(""),!(0,m.Eb)("login",5,3e5)){const e="Too many login attempts. Please try again in 5 minutes.";return N(e),void x(e)}if(!(()=>{const e={};return g.email&&(0,m.B9)(g.email)||(e.email="Please enter a valid email address"),g.phone&&(0,m.BH)(g.phone)||(e.phone="Please enter a valid phone number"),(!g.enrollment||g.enrollment.trim().length<3)&&(e.enrollment="Please enter a valid enrollment number"),(!g.password||g.password.length<6)&&(e.password="Password must be at least 6 characters"),v(e),0===Object.keys(e).length})())return void x("Please fix the errors in the form");k(e=>e+1);const r=await t(g);if(r.success)b("\ud83c\udf89 Welcome back to Campus Connect!",{duration:3e3}),localStorage.removeItem("rateLimit_login"),setTimeout(()=>{e("/")},1500);else{const e=r.error||"Login failed. Please check your credentials.";N(e),x(e)}},noValidate:!0,"aria-label":"Login form",children:[(0,h.jsxs)("div",{className:"mb-4",children:[(0,h.jsx)("label",{htmlFor:"email",className:"block text-custom-text-secondary text-sm font-bold mb-2 required",children:"Email ID (College Provided)"}),(0,h.jsx)("input",{type:"email",id:"email",name:"email",value:g.email,onChange:C,className:"shadow appearance-none border rounded w-full py-2 px-3 text-custom-text leading-tight focus:outline-none focus:ring-2 focus:ring-custom-teal bg-input ".concat(w.email?"border-red-500":"border-custom-border"),placeholder:"yourname@university.edu",required:!0,disabled:s,"aria-required":"true","aria-invalid":w.email?"true":"false","aria-describedby":w.email?"email-error":void 0,autoComplete:"email"}),w.email&&(0,h.jsx)("p",{id:"email-error",className:"text-red-500 text-xs mt-1",role:"alert",children:w.email})]}),(0,h.jsxs)("div",{className:"mb-4",children:[(0,h.jsx)("label",{htmlFor:"phone",className:"block text-custom-text-secondary text-sm font-bold mb-2 required",children:"Phone Number"}),(0,h.jsx)("input",{type:"tel",id:"phone",name:"phone",value:g.phone,onChange:C,className:"shadow appearance-none border rounded w-full py-2 px-3 text-custom-text leading-tight focus:outline-none focus:ring-2 focus:ring-custom-teal bg-input ".concat(w.phone?"border-red-500":"border-custom-border"),placeholder:"+1 (555) 123-4567",required:!0,disabled:s,"aria-required":"true","aria-invalid":w.phone?"true":"false","aria-describedby":w.phone?"phone-error":void 0,autoComplete:"tel"}),w.phone&&(0,h.jsx)("p",{id:"phone-error",className:"text-red-500 text-xs mt-1",role:"alert",children:w.phone})]}),(0,h.jsxs)("div",{className:"mb-4",children:[(0,h.jsx)("label",{htmlFor:"enrollment",className:"block text-custom-text-secondary text-sm font-bold mb-2 required",children:"Enrollment Number"}),(0,h.jsx)("input",{type:"text",id:"enrollment",name:"enrollment",value:g.enrollment,onChange:C,className:"shadow appearance-none border rounded w-full py-2 px-3 text-custom-text leading-tight focus:outline-none focus:ring-2 focus:ring-custom-teal bg-input ".concat(w.enrollment?"border-red-500":"border-custom-border"),placeholder:"ENR123456",required:!0,disabled:s,"aria-required":"true","aria-invalid":w.enrollment?"true":"false","aria-describedby":w.enrollment?"enrollment-error":void 0,autoComplete:"off"}),w.enrollment&&(0,h.jsx)("p",{id:"enrollment-error",className:"text-red-500 text-xs mt-1",role:"alert",children:w.enrollment})]}),(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsx)("label",{htmlFor:"password",className:"block text-custom-text-secondary text-sm font-bold mb-2 required",children:"Password"}),(0,h.jsx)("input",{type:"password",id:"password",name:"password",value:g.password,onChange:C,className:"shadow appearance-none border rounded w-full py-2 px-3 text-custom-text leading-tight focus:outline-none focus:ring-2 focus:ring-custom-teal bg-input ".concat(w.password?"border-red-500":"border-custom-border"),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,disabled:s,"aria-required":"true","aria-invalid":w.password?"true":"false","aria-describedby":w.password?"password-error":void 0,autoComplete:"current-password",minLength:"6"}),w.password&&(0,h.jsx)("p",{id:"password-error",className:"text-red-500 text-xs mt-1",role:"alert",children:w.password})]}),(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("button",{className:"bg-custom-blue hover:bg-blue-700 active:bg-blue-800 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-custom-blue focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 transition-colors",type:"submit",disabled:s,"aria-busy":s?"true":"false",children:[s&&(0,h.jsx)(d.A,{size:"small"}),(0,h.jsx)("span",{children:s?"Signing in...":"Sign In"})]}),(0,h.jsx)(n.N_,{to:"#",className:"inline-block align-baseline font-bold text-sm text-custom-teal hover:text-blue-800 focus:outline-none focus:ring-2 focus:ring-custom-teal rounded px-1","aria-label":"Reset your forgotten password",children:"Forgot password?"})]})]}),(0,h.jsx)("div",{className:"mt-4 text-center",children:(0,h.jsxs)("p",{className:"text-custom-text-secondary text-sm",children:["Don't have an account?"," ",(0,h.jsx)(n.N_,{to:"/register",className:"text-custom-teal hover:text-blue-800 font-bold focus:outline-none focus:ring-2 focus:ring-custom-teal rounded px-1","aria-label":"Create a new Campus Connect account",children:"Register here"})]})})]})]})}},9335:(e,t,s)=>{s.d(t,{B9:()=>o,BH:()=>l,Eb:()=>i,Oj:()=>n});var r=s(4650),a=s.n(r);const o=e=>a().isEmail(e||""),n=e=>{const t=[];return(!e||e.length<8)&&t.push("Password must be at least 8 characters long"),/[A-Z]/.test(e)||t.push("Password must contain at least one uppercase letter"),/[a-z]/.test(e)||t.push("Password must contain at least one lowercase letter"),/[0-9]/.test(e)||t.push("Password must contain at least one number"),/[!@#$%^&*(),.?":{}|<>]/.test(e)||t.push("Password must contain at least one special character"),{isValid:0===t.length,errors:t}},l=e=>a().isMobilePhone(e||"","any",{strictMode:!1}),i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6e4;const r=Date.now(),a=JSON.parse(localStorage.getItem("rateLimit_".concat(e))||"[]").filter(e=>r-e<s);return!(a.length>=t)&&(a.push(r),localStorage.setItem("rateLimit_".concat(e),JSON.stringify(a)),!0)}}}]);
//# sourceMappingURL=93.922d686c.chunk.js.map